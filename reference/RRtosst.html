<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>RR exact CI, TOSST method. — RRtosst • PF</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><!-- mathjax math --><script src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script><script>
  window.MathJax = {
    chtml: {
      fontURL: "https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/output/chtml/fonts/woff-v2"
    }
  };
</script><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="RR exact CI, TOSST method. — RRtosst"><meta name="description" content="Estimates confidence interval for the risk ratio or prevented
fraction; exact method based on the score statistic (inverts two one-sided
tests)."><meta property="og:description" content="Estimates confidence interval for the risk ratio or prevented
fraction; exact method based on the score statistic (inverts two one-sided
tests)."><meta property="og:image" content="https://abs-dev.github.io/PF/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">PF</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">9.6.10</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/PFvignette.html">PF Vignette</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/ABS-dev/PF" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>RR exact CI, TOSST method.</h1>

      <div class="d-none name"><code>RRtosst.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Estimates confidence interval for the risk ratio or prevented
fraction; exact method based on the score statistic (inverts two one-sided
tests).</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">RRtosst</span><span class="op">(</span></span>
<span>  y <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  formula <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  data <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  compare <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"vac"</span>, <span class="st">"con"</span><span class="op">)</span>,</span>
<span>  alpha <span class="op">=</span> <span class="fl">0.05</span>,</span>
<span>  pf <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  stepstart <span class="op">=</span> <span class="fl">0.1</span>,</span>
<span>  iter.max <span class="op">=</span> <span class="fl">36</span>,</span>
<span>  converge <span class="op">=</span> <span class="fl">1e-06</span>,</span>
<span>  rnd <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  trace.it <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  nuisance.points <span class="op">=</span> <span class="fl">120</span>,</span>
<span>  gamma <span class="op">=</span> <span class="fl">1e-06</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-y">y<a class="anchor" aria-label="anchor" href="#arg-y"></a></dt>
<dd><p>Data vector c(y1, n1, y2, n2) where y are the positives, n are the
total, and group 1 is compared to group 2 (control or reference group).</p></dd>


<dt id="arg-formula">formula<a class="anchor" aria-label="anchor" href="#arg-formula"></a></dt>
<dd><p>Formula of the form <code>cbind(y, n) ~ x</code>, where y is the number
positive, n is the group size, x is a factor with two levels of treatment.</p></dd>


<dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>data.frame containing variables of formula.</p></dd>


<dt id="arg-compare">compare<a class="anchor" aria-label="anchor" href="#arg-compare"></a></dt>
<dd><p>Text vector stating the factor levels: <code>compare[1]</code> is the
vaccinate group to which <code>compare[2]</code> (control or reference) is compared.</p></dd>


<dt id="arg-alpha">alpha<a class="anchor" aria-label="anchor" href="#arg-alpha"></a></dt>
<dd><p>Complement of the confidence level.</p></dd>


<dt id="arg-pf">pf<a class="anchor" aria-label="anchor" href="#arg-pf"></a></dt>
<dd><p>Estimate <em>RR</em> or its complement <em>PF</em>?</p></dd>


<dt id="arg-stepstart">stepstart<a class="anchor" aria-label="anchor" href="#arg-stepstart"></a></dt>
<dd><p>starting interval for step search</p></dd>


<dt id="arg-iter-max">iter.max<a class="anchor" aria-label="anchor" href="#arg-iter-max"></a></dt>
<dd><p>Maximum number of iterations</p></dd>


<dt id="arg-converge">converge<a class="anchor" aria-label="anchor" href="#arg-converge"></a></dt>
<dd><p>Convergence criterion</p></dd>


<dt id="arg-rnd">rnd<a class="anchor" aria-label="anchor" href="#arg-rnd"></a></dt>
<dd><p>Number of digits for rounding. Affects display only, not
estimates.</p></dd>


<dt id="arg-trace-it">trace.it<a class="anchor" aria-label="anchor" href="#arg-trace-it"></a></dt>
<dd><p>Verbose tracking of the iterations?</p></dd>


<dt id="arg-nuisance-points">nuisance.points<a class="anchor" aria-label="anchor" href="#arg-nuisance-points"></a></dt>
<dd><p>number of points over which to evaluate nuisance
parameter</p></dd>


<dt id="arg-gamma">gamma<a class="anchor" aria-label="anchor" href="#arg-gamma"></a></dt>
<dd><p>parameter for Berger-Boos correction (restricts range of
nuisance parameter evaluation)</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A <a href="rr1-class.html">rr1</a> object with the following fields.</p><ul><li><p><code>estimate</code>: vector with point and interval estimate</p></li>
<li><p><code>estimator</code>: either <code>"PF"</code> or <code>"RR"</code></p></li>
<li><p><code>y</code>: data.frame with "y1", "n1", "y2", "n2" values.</p></li>
<li><p><code>rnd</code>: how many digits to round the display</p></li>
<li><p><code>alpha</code>: complement of confidence level</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Estimates confidence intervals based on the score statistic that are
'exact' in the sense of accounting for discreteness. Inverts two one-sided
score tests. The score statistic is used to select tail area tables, and
the binomial probability is estimated over the tail area by taking the
maximum over the nuisance parameter. Algorithm is a simple step search.</p>
<p>The data may also be a matrix. In that case <code>Y</code> would be entered as</p>
<p><code>matrix(c(y1, n1-y1, y2, n2-y2), 2, 2, byrow = TRUE)</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Koopman PAR, 1984. Confidence intervals for the ratio of two
binomial proportions. <em>Biometrics</em> 40:513-517.</p>
<p>Agresti A, Min Y, 2001.  On small-sample confidence intervals for
parameters in discrete distribution. <em>Biometrics</em> 57: 963-971.</p>
<p>Berger RL, Boos DD, 1994. P values maximized over a confidence set for the
nuisance parameter. <em>Journal of the American Statistical Association</em>
89:214-220.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><a href="RRotsst.html">RRotsst</a>, <a href="rr1-class.html">rr1</a></p></div>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p><a href="PF-package.html">PF-package</a></p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Both examples represent the same observation, with data entry by vector</span></span></span>
<span class="r-in"><span><span class="co"># and matrix notation.</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">y_vector</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">4</span>, <span class="fl">24</span>, <span class="fl">12</span>, <span class="fl">28</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">RRtosst</span><span class="op">(</span><span class="va">y_vector</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> PF </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 95% interval estimates</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    PF    LL    UL </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 0.611 0.012 0.902 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># PF</span></span></span>
<span class="r-in"><span><span class="co"># 95% interval estimates</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#    PF    LL    UL</span></span></span>
<span class="r-in"><span><span class="co"># 0.611 0.012 0.902</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">y_matrix</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">4</span>, <span class="fl">20</span>, <span class="fl">12</span>, <span class="fl">16</span><span class="op">)</span>, <span class="fl">2</span>, <span class="fl">2</span>, byrow <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co">#      [, 1] [, 2]</span></span></span>
<span class="r-in"><span><span class="co"># [1, ]    4   20</span></span></span>
<span class="r-in"><span><span class="co"># [2, ]   12   16</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">RRtosst</span><span class="op">(</span><span class="va">y_matrix</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> PF </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 95% interval estimates</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    PF    LL    UL </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 0.611 0.012 0.902 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># PF</span></span></span>
<span class="r-in"><span><span class="co"># 95% interval estimates</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#    PF    LL    UL</span></span></span>
<span class="r-in"><span><span class="co"># 0.611 0.012 0.902</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">data1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>group <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"treated"</span>, <span class="st">"control"</span><span class="op">)</span>, each <span class="op">=</span> <span class="fl">2</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">3</span>, <span class="fl">7</span>, <span class="fl">5</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  n <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">12</span>, <span class="fl">12</span>, <span class="fl">14</span>, <span class="fl">14</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  cage <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"cage"</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">)</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">data2</span> <span class="op">&lt;-</span> <span class="va">data1</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">group</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarize</a></span><span class="op">(</span>sum_y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">y</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    sum_n <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">RRtosst</span><span class="op">(</span>data <span class="op">=</span> <span class="va">data2</span>, formula <span class="op">=</span>  <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="va">sum_y</span>, <span class="va">sum_n</span><span class="op">)</span> <span class="op">~</span> <span class="va">group</span>,</span></span>
<span class="r-in"><span>  compare <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"treated"</span>, <span class="st">"control"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> PF </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 95% interval estimates</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    PF    LL    UL </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 0.611 0.012 0.902 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># PF</span></span></span>
<span class="r-in"><span><span class="co"># 95% interval estimates</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#    PF    LL    UL</span></span></span>
<span class="r-in"><span><span class="co"># 0.611 0.012 0.902</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by CVB Statistics, David Siev, Marie Vendettuoli, Thomas Kent.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

